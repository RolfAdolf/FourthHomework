x = sym('x');
y = exp(1/(1-x^2))/(1+x^2);
hold on;
ezplot(y, [-3 3]);

roots = eval(solve(1-x^2))';

lim1 = limit(y, +Inf);
lim2 = limit(y, -Inf);

crit_pts = solve(diff(y));

if (eval(lim1) ~= Inf) 
plot([-3 3], eval(lim2)*[1 1], '--r')
end;
if (eval(lim2) ~= Inf) 
plot([-3 3], eval(lim2)*[1 1], '--r', roots(1)*[1 1], [-20 20], '--b', roots(2)*[1 1], [-20 20], '--b', crit_pts, subs(y, crit_pts), '*')
end;
